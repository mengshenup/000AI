import { wm } from '../window_manager.js'; // 导入窗口管理器单例

class SettingsApp {
    // ---------------------------------------------------------------- //
    //  设置应用类()
    //
    //  函数用处：
    //     管理“个性化设置”APP的业务逻辑。目前主要负责处理自定义壁纸的设置。
    //
    //  易懂解释：
    //     装修师傅。帮你把家里的墙纸换成你喜欢的样子。
    //
    //  警告：
    //     依赖于 DOM 中的 btn-custom-wp 和 custom-wp 元素。
    // ---------------------------------------------------------------- //
    constructor() {
        this.init(); // 初始化应用
    }

    init() {
        // ---------------------------------------------------------------- //
        //  初始化()
        //
        //  函数用处：
        //     绑定设置界面相关的事件监听器。
        //
        //  易懂解释：
        //     师傅准备好工具，等着你下命令。
        // ---------------------------------------------------------------- //
        this.bindEvents(); // 绑定事件
    }

    bindEvents() {
        // ---------------------------------------------------------------- //
        //  绑定事件()
        //
        //  函数用处：
        //     给“应用自定义壁纸”按钮绑定点击事件。
        //
        //  易懂解释：
        //     当你点了“确定换壁纸”按钮，师傅就开始干活。
        // ---------------------------------------------------------------- //

        // === 自定义壁纸按钮 ===
        // 使用可选链 ?. 防止元素不存在时报错
        document.getElementById('btn-custom-wp')?.addEventListener('click', () => {
            const url = document.getElementById('custom-wp')?.value; // 获取输入的图片 URL
            if (url) wm.changeWallpaper(url); // 如果有 URL，调用窗口管理器更换壁纸
        });
    }
}

export const settingsApp = new SettingsApp(); // 导出单例实例
